[Unit]
Description=Eve server
After=network.target remote-fs.target nss-lookup.target
Requires=eved.socket

[Service]
Type=simple
Environment="APP_SECRET_KEY={{ APP_SECRET_KEY }}"
Environment="OAUTH_CLIENT_ID={{ OAUTH_CLIENT_ID }}"
Environment="OAUTH_CLIENT_SECRET={{ OAUTH_CLIENT_SECRET }}"
Environment="OAUTH_REDIRECT_URI=https://{{ domain_name }}/api/oauth2callback"
Restart=always
WorkingDirectory=/var/www/{{ domain_name }}/
ExecStart=/var/eved/{{ domain_name }}/venv/bin/uwsgi --plugin python3
--virtualenv /var/eved/{{ domain_name }}/venv/ -s /tmp/uwsgi.sock
--manage-script-name --mount /api=run

[Install]
WantedBy=multi-user.target
